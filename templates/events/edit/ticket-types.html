{% extends "events/edit/layout.html" %}

{% block edit_content %}
    <div class="event-title">–¢–∏–ø—ã –±–∏–ª–µ—Ç–æ–≤ ({{ ticket_types | length }})</div>

    <div class="block">
        <div class="block-header block-header-with-button">
            <span>üéüÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞–º–∏ –±–∏–ª–µ—Ç–æ–≤</span>
            <div>
                <a href="{% url "edit_ticket_type_new" event.id %}" class="button button-blue button-small">+ –ù–æ–≤—ã–π</a>
            </div>
        </div>

        {% if ticket_types %}
            <div class="list">
                {% for ticket_type in ticket_types %}
                    <div class="list-row list-row-hover">
                        <div class="list-cell">
                            <div class="ticket-type-name">{{ ticket_type.name }}</div>
                            {% if ticket_type.description %}
                                <div class="ticket-type-description">{{ ticket_type.description }}</div>
                            {% endif %}
                        </div>
                        <div class="list-cell">
                            <div class="ticket-type-limits">
                                {% if ticket_type.price and ticket_type.price > 0 %}
                                    <span class="ticket-type-price-display">{{ ticket_type.price|floatformat }}{% if ticket_type.currency %} {{ ticket_type.currency }}{% endif %}</span>
                                {% endif %}
                                {% if ticket_type.limit_quantity > 0 %}
                                    <div>–õ–∏–º–∏—Ç: <strong>{{ ticket_type.limit_quantity }}</strong></div>
                                {% endif %}
                                {% if ticket_type.limit_per_user > 0 %}
                                    <div>–ù–∞ —Ä—É–∫–∏: <strong>{{ ticket_type.limit_per_user }}</strong></div>
                                {% endif %}
                                <div>–ü—Ä–æ–¥–∞–Ω–æ: <strong>{{ ticket_type.tickets_sold }}</strong></div>
                            </div>
                        </div>
                        <div class="list-cell-actions">
                            <a href="{% url "edit_ticket_type" event.id ticket_type.id %}" class="button button-small">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <form method="POST" action="{% url "delete_ticket_type" event.id ticket_type.id %}" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="button button-small button-red" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–∏–ø –±–∏–ª–µ—Ç–∞ ¬´{{ ticket_type.name }}¬ª?{% if ticket_type.tickets_sold > 0 %}\n\n–í–Ω–∏–º–∞–Ω–∏–µ: —É–∂–µ –ø—Ä–æ–¥–∞–Ω–æ {{ ticket_type.tickets_sold }} –±–∏–ª–µ—Ç–æ–≤ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞!{% endif %}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="block-description">–ü–æ–∫–∞ –Ω–µ—Ç —Ç–∏–ø–æ–≤ –±–∏–ª–µ—Ç–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π!</div>
        {% endif %}
    </div>
{% endblock %}
