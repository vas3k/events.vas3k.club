{% load static %}<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{{ settings.APP_TITLE }}{% endblock %}</title>

    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    {% block meta %}
    {% endblock %}

    {% block fonts %}
    {% endblock %}

    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    {% block css %}
    {% endblock %}

    <link rel="apple-touch-icon" sizes="180x180" href="{% static "images/favicon/apple-touch-icon.png" %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static "images/favicon/favicon-32x32.png" %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static "images/favicon/favicon-16x16.png" %}">
    <link rel="manifest" href="{% static "images/favicon/site.webmanifest" %}">

    <script type="module" src="{% static 'js/main.js' %}"></script>
    {% block js %}
    {% endblock %}
</head>
<body>
    {% block header %}
        <header class="header">
            <div class="header-logo">
                <a href="{% url "index" %}">–í–∞—Å—Ç—Ä–∏–∫ üî• –ò–≤–µ–Ω—Ç—ã</a>
            </div>

            <div class="header-user">
                {% if request.user.is_authenticated %}
                    <a href="{% url "profile" %}" class="button header-user-button">
                        –ú–æ–∏ –∏–≤–µ–Ω—Ç—ã

                        <span class="avatar" style="background-image: url('{{ request.user.get_avatar }}');"></span>
                    </a>
                {% else %}
                    <a href="{% url "login_club" %}" class="button">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –í–∞—Å—Ç—Ä–∏–∫ ‚úñÔ∏é –ö–ª—É–±</a>
                {% endif %}
            </div>
        </header>
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block footer %}
        <footer class="footer">
            –ó–¥–µ—Å—å –≤ —Ñ—É—Ç–µ—Ä–µ –º–µ–ª–∫–∏–º —à—Ä–∏—Ñ—Ç–æ–º –≤—Å–µ–≥–¥–∞ –Ω–∞–ø–∏—Å–∞–Ω–æ —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ –¥–ª—è –∞–¥–≤–æ–∫–∞—Ç–æ–≤ –∏ –ª–∏–≥–∞–ª —Ç–∏–º–∞. –ù–æ –º—ã –º–∞–ª–µ–Ω—å–∫–∏–µ, —É –Ω–∞—Å —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç, –ø–æ—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–µ–º, —á—Ç–æ –≤—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã, —Ä–µ—Ñ–∞–Ω–¥–æ–≤ –Ω–µ—Ç, –∏–≤–µ–Ω—Ç—ã –¥–µ–ª–∞—é—Ç—Å—è –Ω–∞ –≥–æ–ª–æ–º —ç–Ω—Ç—É–∑–∏–∞–∑–º–µ –∏ –Ω–∏–∫—Ç–æ –Ω–∏ –∑–∞ —á—Ç–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç!

            <br><br>‚úñÔ∏é <a href="https://vas3k.club" style="text-decoration: underline;">–í–∞—Å—Ç—Ä–∏–∫ –ö–ª—É–±</a>
        </footer>
    {% endblock %}


    <script src="{% static 'js/tweemoji.min.js' %}"></script>
    <script>
        (function stylizeExternalLinks() {
            let internal = location.host.replace("www.", "");
            internal = new RegExp(internal, "i");

            const links = [...document.getElementsByTagName("a")];

            links.forEach((link) => {
                if (internal.test(link.host) || !link.host) return;

                // open external link in new tab
                link.setAttribute("target", "_blank");
                link.setAttribute("rel", "noopener");

                // insert favicon img
                const domain = link.host.split(":")[0];
                const img = document.createElement("img");
                img.src = `https://www.google.com/s2/favicons?domain=${domain}&sz=32`;
                img.className = "link-favicon";
                link.insertBefore(img, link.firstChild);
            });
        })();

        (function initializePoorManEmoji() {
            let isApple = /iPad|iPhone|iPod|OS X/.test(navigator.userAgent) && !window.MSStream;
            if (!isApple) {
                document.body = twemoji.parse(document.body, { base: "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/" });
            }
        })();

        (function initCountdowns() {
            const timers = document.querySelectorAll('.countdown-timer:not(.initialized)');

            timers.forEach(timer => {
                // Mark as initialized so we don't bind twice if script runs again
                timer.classList.add('initialized');

                let totalSeconds = parseInt(timer.getAttribute('data-seconds')) || 0;

                // Find child elements relatively
                const daysEl = timer.querySelector('[data-unit="days"]');
                const hoursEl = timer.querySelector('[data-unit="hours"]');
                const minutesEl = timer.querySelector('[data-unit="minutes"]');
                const secondsEl = timer.querySelector('[data-unit="seconds"]');

                function update() {
                    if (totalSeconds <= 0) {
                        clearInterval(interval);
                        location.reload();
                        return;
                    }

                    const d = Math.floor(totalSeconds / 86400);
                    const h = Math.floor((totalSeconds % 86400) / 3600);
                    const m = Math.floor((totalSeconds % 3600) / 60);
                    const s = totalSeconds % 60;

                    if (daysEl) daysEl.textContent = d;
                    if (hoursEl) hoursEl.textContent = h.toString().padStart(2, '0');
                    if (minutesEl) minutesEl.textContent = m.toString().padStart(2, '0');
                    if (secondsEl) secondsEl.textContent = s.toString().padStart(2, '0');

                    totalSeconds--;
                }

                update();
                const interval = setInterval(update, 1000);
            });
        })();
    </script>
</body>
</html>